(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{498:function(t,s,a){"use strict";a.r(s);var n=a(1),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("本篇博客主要是对 ENSP常见命令的学习总结（持续更新）\n")]),t._v(" "),s("h2",{attrs:{id:"路由器相关配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#路由器相关配置"}},[t._v("#")]),t._v(" 路由器相关配置")]),t._v(" "),s("h3",{attrs:{id:"取消警告及提示信息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#取消警告及提示信息"}},[t._v("#")]),t._v(" 取消警告及提示信息")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("R1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("un "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" en\n")])])]),s("h2",{attrs:{id:"清除配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#清除配置"}},[t._v("#")]),t._v(" 清除配置")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("R"),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("1")]),t._v(">")]),t._v("reset saved-configuration\n")])])]),s("h3",{attrs:{id:"_1-接口配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-接口配置"}},[t._v("#")]),t._v(" 1.接口配置")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("int g0/0/0 "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#进入接口")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ip")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".1.1  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 添加ip")]),t._v("\n")])])]),s("h3",{attrs:{id:"_2-接口信息查询"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-接口信息查询"}},[t._v("#")]),t._v(" 2.接口信息查询：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("dis int brief "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#只能查询到接口开放状态")]),t._v("\n\ndis "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ip")]),t._v(" int brief "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 接口绑定IP查询")]),t._v("\n\ndis "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ip")]),t._v(" routing-table "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#路由表查询")]),t._v("\n")])])]),s("h2",{attrs:{id:"交换机配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#交换机配置"}},[t._v("#")]),t._v(" 交换机配置")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("int vlan "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#创建vlan")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ip")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ip")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("24")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ip绑定")]),t._v("\n\ndis this "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#查看当前vlan （也适用于路由）")]),t._v("\n\ninfo-center "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("source")]),t._v(" ds channel "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" log state off "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("trap")]),t._v(" state off "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#取消交换机告警")]),t._v("\n\nun "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" en "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#取消警告")]),t._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# dhcp配置")]),t._v("\n\ndhcp "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("enable")]),t._v("\n\ndhcp "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" interface   //开启接口的DHCP服务功能，选用接口地址池\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置access口")]),t._v("\nport link-type access\n")])])]),s("h2",{attrs:{id:"静态路由配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#静态路由配置"}},[t._v("#")]),t._v(" 静态路由配置：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ip")]),t._v(" route-static 你要去的ip 要去ip的掩码 必须经过的ip地址\n")])])]),s("h2",{attrs:{id:"ospf配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ospf配置"}},[t._v("#")]),t._v(" ospf配置：")]),t._v(" "),s("p",[t._v("拓扑：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://wangdengdeng.oss-cn-hangzhou.aliyuncs.com/NewPic/202303230938742.png",alt:"image-20230323093803617"}})]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("R1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("ospf "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" router-id "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("loop地址"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n\t\n\tarea "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" \n\t\n\tnetwork "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("添加相邻网段"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\n\t成功回显 ：Neighbor changes eve\nnt: neighbor status changed. "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ProcessId"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("256")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("NeighborAddress")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.12")]),t._v(".33.10, Neighbo\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("rEvent")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("HelloReceived, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("NeighborPreviousState")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("Down, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("NeighborCurrentState")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\tdis ospf peer "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#查看邻居信息")]),t._v("\n\t\t回显：\n\t\t\tDR: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10.33")]),t._v(".13.1  BDR: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10.33")]),t._v(".13.2  MTU: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#非抢占式的DR选择")]),t._v("\n\t\t\t\n\tdis ospf peer brief "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#邻居信息表")]),t._v("\n\t\t回显：\n\t\t OSPF Process "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" with Router ID "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10.0")]),t._v(".1.1\n\t\t  Peer Statistic Information\n \t\t\t----------------------------------------------------------------------------\n             Area Id          Interface                        Neighbor "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("id")]),t._v("      State    \n             "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),t._v(".0.0          GigabitEthernet0/0/0             "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10.33")]),t._v(".2.2        Full        \n             "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),t._v(".0.0          GigabitEthernet0/0/1             "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10.33")]),t._v(".3.3        Full        \n\n             ----------------------------------------------------------------------------\n\n")])])]),s("h3",{attrs:{id:"ospf-修改hello和time"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ospf-修改hello和time"}},[t._v("#")]),t._v(" ospf 修改Hello和time")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("dis ospf int g0/0/0 "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#查看接口指向下一网络的ospf配置")]),t._v("\n\t\t\t回显：\n\t\t\tTimers: Hello "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(" , Dead "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("40")]),t._v(" , Poll  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("120")]),t._v(" , Retransmit "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" , Transmit Delay "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" \n\ndis timer hello "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x秒"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#修改")]),t._v("\n\t\t  dead "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x秒"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\t\n\t\t  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 此时查看ospf brief，发现修改之后的端口无法与R1建立邻居关系")]),t._v("\n")])])]),s("h3",{attrs:{id:"ospf-默认路由发布"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ospf-默认路由发布"}},[t._v("#")]),t._v(" ospf 默认路由发布")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ip")]),t._v(" route-static "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),t._v(".0.0 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" Loopback "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#默认路由配置")]),t._v("\n\nospf "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n\ndefault-route-advertise "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#ospf发布")]),t._v("\n")])])]),s("h3",{attrs:{id:"ospf-dr-bdr选举控制"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ospf-dr-bdr选举控制"}},[t._v("#")]),t._v(" ospf DR/BDR选举控制")]),t._v(" "),s("blockquote",[s("p",[t._v("在未设置优先级时，默认优先级都为1。且此时两个路由器会选择route-id较大的那个作为DR，另一个为BDR。")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 正确查看DR和BDR ！！！！")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("R1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("dis ospf peer "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("与R1直连的路由器loop "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ip")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#才能找到对应的DR，直接peer会显示邻居DR")]),t._v("\n\n\tint g0/0/0\n\t\n\tospf dr-priority "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#修改优先级")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("R2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("int g0/0/1\n\n\tospf dr-priority "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v(" \n\t\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#注意！！！")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#在端口修改优先级之后要重启端口")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# shutdown /  undo shutdown")]),t._v("\n")])])]),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("改之前：\ndis ospf peer "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10.33")]),t._v(".3.3\n\n\t OSPF Process "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" with Router ID "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10.0")]),t._v(".1.1\n\t\t Neighbors \n\n Area "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),t._v(".0.0 interface "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10.33")]),t._v(".13.1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("GigabitEthernet0/0/1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'s neighbors\n Router ID: 10.33.3.3        Address: 10.33.13.2      \n   State: Full  Mode:Nbr is  Master  Priority: 1\n   \n   #  DR: 10.33.13.2  BDR: 10.33.13.1  MTU: 0    \n   \n   Dead timer due in 40  sec \n   Retrans timer interval: 5 \n   Neighbor is up for 00:11:17     \n   Authentication Sequence: [ 0 ] \n之后：\nOSPF Process 1 with Router ID 10.0.1.1\n\t\t Neighbors \n\n Area 0.0.0.0 interface 10.33.13.1(GigabitEthernet0/0/1)'")]),t._v("s neighbors\n Router ID: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10.33")]),t._v(".3.3        Address: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10.33")]),t._v(".13.2      \n   State: Full  Mode:Nbr is  Master  Priority: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("\n   \n   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# DR: 10.33.13.1  BDR: 10.33.13.2  MTU: 0    ")]),t._v("\n   \n   Dead timer due "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("33")]),t._v("  sec \n   Retrans timer interval: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" \n   Neighbor is up "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" 00:00:45     \n   Authentication Sequence: "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" \n")])])]),s("h2",{attrs:{id:"isis协议配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#isis协议配置"}},[t._v("#")]),t._v(" ISIS协议配置")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("R3-GigabitEthernet0/0/2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("isis\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("R3-isis-1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("network-entity "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("49.0001")]),t._v(".0000.0000.0002.00\nMar "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("31")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2023")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(":12:50-08:00 R3 %%01ISIS/4/START_ENABLE_ISIS"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("l"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":ISIS "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("256")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("enable")]),t._v("\nd all ISIS modules. \n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("R3-isis-1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("is-level level-1\nInfo: IS Level Changed, Resetting ISIS"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nMar "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("31")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2023")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(":13:02-08:00 R3 %%01ISIS/4/START_DISABLE_ISIS"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("l"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":ISIS "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("256")]),t._v(" disab\nled all ISIS modules. \n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("R3-isis-1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nMar "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("31")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2023")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(":13:02-08:00 R3 %%01ISIS/4/START_ENABLE_ISIS"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("l"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":ISIS "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("256")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("enable")]),t._v("\nd all ISIS modules. \n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("R3-isis-1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("int g0/0/2\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("R3-GigabitEthernet0/0/2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("isis "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("enable")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n\n")])])]),s("h2",{attrs:{id:"bgp协议的配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#bgp协议的配置"}},[t._v("#")]),t._v(" BGP协议的配置")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("R2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("bgp "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("R2-bgp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("router-id "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.2")]),t._v(".2.2\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("R2-bgp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("peer "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3.3")]),t._v(".3.3 as-number "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("R2-bgp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("peer "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3.3")]),t._v(".3.3 connect-int loop "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("R2-bgp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("peer "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3.3")]),t._v(".3.3 next-hop-local\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("R2-bgp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("dis this\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("V200R003C00"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\nbgp "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v("\n router-id "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.2")]),t._v(".2.2\n peer "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3.3")]),t._v(".3.3 as-number "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v(" \n peer "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3.3")]),t._v(".3.3 connect-interface LoopBack0\n "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n ipv4-family unicast\n  undo synchronization\n  peer "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3.3")]),t._v(".3.3 "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("enable")]),t._v("\n  peer "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3.3")]),t._v(".3.3 next-hop-local \n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("return")]),t._v("\n\n")])])]),s("h2",{attrs:{id:"帧中继配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#帧中继配置"}},[t._v("#")]),t._v(" 帧中继配置")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("R1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("int s4/0/0\n\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ip")]),t._v(" addr "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".1.1 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("24")]),t._v("\n\tlink-protocol fr\n\tfr dlci "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("\n\tfr interface-type dte\n\tfr map "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ip")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".1.2 DLCI"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("自己端口"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"vlan结合trunk、access、hybird接口配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vlan结合trunk、access、hybird接口配置"}},[t._v("#")]),t._v(" vlan结合trunk、access、hybird接口配置")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("SW1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" vlan batch "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),t._v("\n\t  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# access口")]),t._v("\n\t  port link-type access\n\t  port default vlan "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v("\n\t  \n\t  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#trunk口")]),t._v("\n\t  port link-type trunk\n\t  port trunk allow-pass vlan "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),t._v("\n\t  \n\t  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#hybird口")]),t._v("\n\t  port hybrid untagged vlan "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),t._v("\n\t  port hybrid pvid vlan "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("\n")])])]),s("h2",{attrs:{id:"vlan配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vlan配置"}},[t._v("#")]),t._v(" vlan配置")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# vlan 划分")]),t._v("\nvlan batch "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v(" （逐个划分）\nvlan batch "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("-12 （范围划分）\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#vlan检查")]),t._v("\ndis vlan 交换机接口对应vlan以及已划分vlan显示 \ndis port vlan active "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#交换机各接口接口类型、接口属于哪个vlan（pvid）以及untagged / tagged list回显")]),t._v("\n")])])]),s("h3",{attrs:{id:"三种接口的区别以及vlan-tagged-untagged的解释"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三种接口的区别以及vlan-tagged-untagged的解释"}},[t._v("#")]),t._v(" 三种接口的区别以及vlan tagged untagged的解释")]),t._v(" "),s("blockquote",[s("p",[t._v("ensp交换机默认接口的类型是hybird类型（ 混合接口）在将接口划分至vlan时不可直接由hybird接口划分")])]),t._v(" "),s("h4",{attrs:{id:"_1-access"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-access"}},[t._v("#")]),t._v(" 1.access")]),t._v(" "),s("p",[t._v("一个access口仅仅支持被划分在一个vlan下")]),t._v(" "),s("p",[t._v("access口vlan的划分：")]),t._v(" "),s("p",[t._v("接口模式下修改接口类型、"),s("strong",[t._v("p d v （vlan号）")])]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Huawei"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("int e0/0/3\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Huawei-Ethernet0/0/3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("port link-type access\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Huawei-Ethernet0/0/3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("port default vlan "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Huawei-Ethernet0/0/3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("dis this\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\ninterface Ethernet0/0/3\n port link-type access\n port default vlan "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("return")]),t._v("\n")])])]),s("p",[t._v("此时查看active ：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("Eth0/0/3            access       "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("      U: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("\n")])])]),s("p",[t._v("access接口、pvid为vlan号、untagged list=10")]),t._v(" "),s("blockquote",[s("p",[t._v("==untagged list==简而言之就是在发送数据包时，如果匹配上untagged list 则删除tag后发送")]),t._v(" "),s("p",[t._v("而==tagged list==就是如果匹配上tagged vlan list ，则保留tag直接发送。即不做任何改变的发送")])]),t._v(" "),s("h4",{attrs:{id:"_2-trunk"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-trunk"}},[t._v("#")]),t._v(" 2.trunk")]),t._v(" "),s("p",[t._v("trunk口可被划分至多个vlan下")]),t._v(" "),s("h5",{attrs:{id:"access改trunk-已经含有配置项"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#access改trunk-已经含有配置项"}},[t._v("#")]),t._v(" access改trunk（已经含有配置项）")]),t._v(" "),s("blockquote",[s("p",[t._v("1.==交换机下==清除现有所有配置，但是此时接口会关闭  "),s("code",[t._v("clear configuration int e0/0/3")])]),t._v(" "),s("p",[t._v("2.undo shutdown 开启接口")])]),t._v(" "),s("p",[t._v("trunk口vlan的划分：")]),t._v(" "),s("p",[t._v("plt设置接口类型、"),s("code",[t._v("port trunk allow-pass vlan ()")]),t._v("设置允通过vlan "),s("strong",[t._v("p t a v 10")])]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Huawei-Ethernet0/0/3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("p l t \n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Huawei-Ethernet0/0/3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("port trunk allow-pass vlan "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Huawei-Ethernet0/0/3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("dis this\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\ninterface Ethernet0/0/3\n port link-type trunk\n port trunk allow-pass vlan "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("return")]),t._v("\n")])])]),s("p",[t._v("查看active：")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("Eth0/0/3            trunk        "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("       U: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n                                         T: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("\n")])])]),s("p",[t._v("pvid此时为1，可允许vlan10的包到达，但是由于ping包回复时vid=10，与pvid不相等，不允许发出。故此时ping得不到回复")]),t._v(" "),s("h5",{attrs:{id:"试验"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#试验"}},[t._v("#")]),t._v(" 试验")]),t._v(" "),s("p",[t._v("trunk口先行设置pvid=10 而不进行allowed设置")]),t._v(" "),s("p",[t._v("active查看：")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("Eth0/0/4            trunk        "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("      T: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n")])])]),s("p",[t._v("只是单纯的进行了pvid的赋值，但是没有allow vlan10的进入，数据包根本就进不去4接口")]),t._v(" "),s("p",[s("strong",[t._v("所以==tagged list==也是当接收的数据包打了tag，判断list中是否含有tag，是否无条件放行的一张列表")])]),t._v(" "),s("p",[t._v("一个简单的ping包发出，经过接口1，打上接口1对应的pvid。发送至接口2，接口二进行vid与pvid匹配（或tag list中有vid），相同则放行且如果vid在tagged list，去掉tag发走，不在就保留发走。")])])}),[],!1,null,null,null);s.default=e.exports}}]);
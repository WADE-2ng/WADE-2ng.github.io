(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{504:function(v,t,a){"use strict";a.r(t);var n=a(1),r=Object(n.a)({},(function(){var v=this,t=v._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[t("h4",{attrs:{id:"路由基础配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#路由基础配置"}},[v._v("#")]),v._v(" 路由基础配置")]),v._v(" "),t("p",[v._v("路由器命名：")]),v._v(" "),t("p",[v._v("[Huawei]sysname R1")]),v._v(" "),t("p",[v._v("接口ip配置：")]),v._v(" "),t("p",[v._v("[R1]interface g0/0/0\n[R1-GigabitEthernet0/0/0]ip address 192.168.1.254 24")]),v._v(" "),t("p",[v._v("禁止输出详细信息（根下）：")]),v._v(" "),t("p",[v._v("[R1]undo info enable")]),v._v(" "),t("p",[v._v("各种display：")]),v._v(" "),t("p",[v._v("dis int brief #只能查询到接口开放状态")]),v._v(" "),t("p",[v._v("dis ip int brief # 接口绑定IP查询")]),v._v(" "),t("p",[v._v("dis ip routing-table #路由表查询")]),v._v(" "),t("p",[v._v("dis ip routing-table protocol rip # 查看对应协议的路由表")]),v._v(" "),t("h4",{attrs:{id:"arp代理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#arp代理"}},[v._v("#")]),v._v(" arp代理")]),v._v(" "),t("p",[v._v("dis arp all 查看arp表")]),v._v(" "),t("p",[v._v("arp static 192.168.1.1 5489-98aa-1933 修改路由器arp表")]),v._v(" "),t("p",[v._v("[Huawei-GigabitEthernet0/0/0]arp-proxy enable # 开启arp代理")]),v._v(" "),t("h4",{attrs:{id:"rip"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rip"}},[v._v("#")]),v._v(" rip")]),v._v(" "),t("p",[t("strong",[v._v("ripv1")])]),v._v(" "),t("Huawei",[v._v("sys\n"),t("p",[v._v("Enter system view, return user view with Ctrl+Z.\n[Huawei]rip 1\n[Huawei-rip-1]network 10.0.0.0")]),v._v(" "),t("p",[t("strong",[v._v("ripv2")])]),v._v(" "),t("p",[v._v("[Huawei]rip 1\n[Huawei-rip-1]version 2\n[Huawei-rip-1]network 10.0.0.0")]),v._v(" "),t("p",[t("strong",[v._v("ripv1、v2通信")])]),v._v(" "),t("p",[v._v("在已经配置v1或者v2的路由器与另一版本相连的接口上：")]),v._v(" "),t("p",[v._v("[Huawei-GigabitEthernet0/0/1]rip version 2")]),v._v(" "),t("h4",{attrs:{id:"vlan"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vlan"}},[v._v("#")]),v._v(" vlan")]),v._v(" "),t("p",[t("strong",[v._v("vlan 划分")])]),v._v(" "),t("p",[v._v("vlan batch 10 20 （逐个划分）\nvlan batch 10 to 12 （范围划分）")]),v._v(" "),t("p",[t("strong",[v._v("dis")])]),v._v(" "),t("p",[v._v("dis port vlan active #交换机各接口接口类型、接口属于哪个vlan（pvid）以及untagged / tagged list回显")]),v._v(" "),t("p",[t("strong",[v._v("access")])]),v._v(" "),t("p",[v._v("[Huawei-Ethernet0/0/3]port link-type access\n[Huawei-Ethernet0/0/3]port default vlan 10")]),v._v(" "),t("p",[t("strong",[v._v("trunk")])]),v._v(" "),t("p",[v._v("[Huawei-Ethernet0/0/3]port link-type trunk")]),v._v(" "),t("p",[v._v("[Huawei-Ethernet0/0/3]port trunk allow-pass vlan 10")]),v._v(" "),t("p",[t("strong",[v._v("hybrid")])]),v._v(" "),t("p",[v._v("[Huawei-GigabitEthernet0/0/3]port link-type hybrid")]),v._v(" "),t("p",[v._v("[Huawei-GigabitEthernet0/0/3]port hybrid pvid vlan 30")]),v._v(" "),t("p",[v._v("[Huawei-GigabitEthernet0/0/3]port hybrid untagged vlan  20 30")]),v._v(" "),t("h4",{attrs:{id:"vlan的两种类型"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vlan的两种类型"}},[v._v("#")]),v._v(" vlan的两种类型")]),v._v(" "),t("p",[t("strong",[v._v("基于mac划分")])]),v._v(" "),t("p",[v._v("[Huawei-Ethernet0/0/1]vlan 20 \t# vlan20 下绑定mac")]),v._v(" "),t("p",[v._v("[Huawei-vlan20]mac-vlan mac-address 5489-98C8-80D5")]),v._v(" "),t("p",[t("strong",[v._v("四位一个  -")])]),v._v(" "),t("p",[t("strong",[v._v("基于子网划分")])]),v._v(" "),t("p",[v._v("[HW-SW]vlan 30\n[HW-SW-vlan30]ip-subnet-vlan 1 ip 192.168.30.0 24")]),v._v(" "),t("p",[v._v("[HW-SW]int e0/0/3\n[HW-SW-Ethernet0/0/3]port hybrid untagged vlan 30\n[HW-SW-Ethernet0/0/3]ip-subnet-vlan enable")]),v._v(" "),t("h4",{attrs:{id:"stp生成树"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#stp生成树"}},[v._v("#")]),v._v(" stp生成树")]),v._v(" "),t("p",[t("strong",[v._v("dis")])]),v._v(" "),t("p",[v._v("dis stp 返回优先级、根桥信息，返回所有接口的类型状态")]),v._v(" "),t("p",[v._v("dis stp brief 查看stp交换机端口类型")]),v._v(" "),t("p",[v._v("dis stp int g0/0/2 查看端口上的stp信息 ，返回优先级、根桥信息，但会返回指定接口信息")]),v._v(" "),t("p",[t("strong",[v._v("交换机mac查看：")])]),v._v(" "),t("p",[v._v("[Huawei]dis bridge mac-address\nSystem bridge MAC address: 4c1f-cc0c-5ce1")]),v._v(" "),t("p",[v._v("[Huawei]stp enable\n[Huawei]stp mode stp")]),v._v(" "),t("p",[t("strong",[v._v("判断根交换机：")])]),v._v(" "),t("p",[v._v("[Huawei]dis stp  #结果返回的CIST Bridge与CIST Root/ERPC相同mac")]),v._v(" "),t("p",[t("strong",[v._v("优先级切换")])]),v._v(" "),t("p",[v._v("S1:\n[S1]stp priority 0\t//将S1的优先级指定为0\nS2:\n[S2]stp priority 4096\t//将S2的优先级指定为4096")]),v._v(" "),t("p",[t("strong",[v._v("根交换机指定")])]),v._v(" "),t("p",[v._v("S1:\n[S1]stp root primary \t\t//将S1指定为根交换机，此时默认根交换机的优先级为0\ns2:\n[S2]stp root secondary \t\t//将S2指定为备份交换机，优先级默认4096")]),v._v(" "),t("h4",{attrs:{id:"mstp"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mstp"}},[v._v("#")]),v._v(" mstp")]),v._v(" "),t("p",[v._v("stp mode mstp               #修改生成树模式为mstp\nstp region-configuration    #进入stp配置模式\nregion-name gzs            #生成树名称为gzs\nrevision-level 1           #域名修订级别为1\ninstance 1 vlan 10         #创建实例1把vlan10放入\ninstance 2 vlan 20         #创建实例2把vlan20放入\nactive region-configuration    #让生成树配置立即生效")]),v._v(" "),t("p",[t("strong",[v._v("设置不同vlan之间的优先级")])]),v._v(" "),t("p",[v._v("stp instance 1 root primary         #设置实例1中的vlan10为主优先级\nstp instance 2 root secondary       #设置实例2中的vlan20为备优先级")]),v._v(" "),t("h4",{attrs:{id:"端口隔离"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#端口隔离"}},[v._v("#")]),v._v(" 端口隔离")]),v._v(" "),t("p",[v._v("port-isolate enable")]),v._v(" "),t("h4",{attrs:{id:"rstp"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rstp"}},[v._v("#")]),v._v(" rstp")]),v._v(" "),t("p",[t("strong",[v._v("dis stp brief (非根桥)")])]),v._v(" "),t("p",[v._v("[Huawei]dis stp brief\nMSTID  Port                        Role  STP State     Protection\n0    Ethernet0/0/1               ROOT  FORWARDING      NONE\n0    Ethernet0/0/2               DESI  FORWARDING      NONE\n0    Ethernet0/0/3               BACK  DISCARDING      NONE")]),v._v(" "),t("p",[v._v("] stp mode rstp")]),v._v(" "),t("p",[v._v("]stp root primary")]),v._v(" "),t("p",[v._v("]stp root secondary")]),v._v(" "),t("p",[v._v("0/0/1]stp edged-port enable")]),v._v(" "),t("h4",{attrs:{id:"主从vlan"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#主从vlan"}},[v._v("#")]),v._v(" 主从vlan")]),v._v(" "),t("p",[t("strong",[v._v("主vlan设置：")])]),v._v(" "),t("p",[v._v("设置为主vlan")]),v._v(" "),t("p",[v._v("[Huawei-vlan100]mux-vlan")]),v._v(" "),t("p",[v._v("设置300为组vlan")]),v._v(" "),t("p",[v._v("[Huawei-vlan100]subordinate group 300")]),v._v(" "),t("p",[v._v("设置200为隔离vlan\n[Huawei-vlan100]subordinate  separate 200")]),v._v(" "),t("p",[t("strong",[v._v("与主vlan相连的端口：")])]),v._v(" "),t("p",[v._v("[Huawei-GigabitEthernet0/0/2]port link-type access")]),v._v(" "),t("p",[v._v("[Huawei-GigabitEthernet0/0/2]port default vlan 200\n开启主vlan功能\n[Huawei-GigabitEthernet0/0/2]port mux-vlan enable")]),v._v(" "),t("p",[t("strong",[v._v("mux配置查看：")])]),v._v(" "),t("p",[v._v("[Huawei]dis mux")]),v._v(" "),t("h4",{attrs:{id:"vlan聚合"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vlan聚合"}},[v._v("#")]),v._v(" vlan聚合")]),v._v(" "),t("p",[v._v("建立super vlan  15")]),v._v(" "),t("p",[v._v("vlan 15]")]),v._v(" "),t("p",[v._v("aggregate-vlan")]),v._v(" "),t("p",[v._v("access-vlan 5 10 # 两个sub-vlan")]),v._v(" "),t("p",[v._v("建立三层接口")]),v._v(" "),t("p",[v._v("vlanif 5]ip addr")]),v._v(" "),t("p",[v._v("vlanif10] ip addr")]),v._v(" "),t("p",[v._v("5和10的 顶层接口是trunk，连pc是access")]),v._v(" "),t("p",[t("strong",[v._v("不同vlan下互通，使用arp，进入顶层vlanif")])]),v._v(" "),t("p",[v._v("interface Vlanif 15")]),v._v(" "),t("p",[v._v("arp-proxy enable")]),v._v(" "),t("p",[t("strong",[v._v("arp-proxy inner-sub-vlan-proxy enable")]),v._v(" "),t("strong",[v._v("需要互通的主机处于相同网段，并且属于相同VLAN，但是VLAN内配置了端口隔离的场景。")]),v._v(" "),t("strong",[v._v("arp-proxy inter-sub-vlan-proxy enable")]),v._v(" "),t("strong",[v._v("需要互通的主机处于相同网段，但属于不同VLAN的场景")])]),v._v(" "),t("h4",{attrs:{id:"单臂路由-不同网段vlan间的通信"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#单臂路由-不同网段vlan间的通信"}},[v._v("#")]),v._v(" 单臂路由（不同网段vlan间的通信）")]),v._v(" "),t("p",[t("strong",[v._v("三层交换机：（连接pc为access，连路由是trunk，允许多个vlan）")])]),v._v(" "),t("p",[v._v("[Huawei]vlan batch 2 3                                        //批量创建vlan，vlan2和vlan3\n[Huawei]int g0/0/1                                            //进入0/0/1端口\n[Huawei-GigabitEthernet0/0/1] port link-type trunk            //更改端口的属性，改为trnuk口")]),v._v(" "),t("p",[t("strong",[v._v("路由配置 （子接口封装dot1q协议，分配ip(pc的网关)，arp广播开启）")])]),v._v(" "),t("p",[v._v("Huawei]")]),v._v(" "),t("p",[v._v("int g0/0/0.1         //进入0/0/0.1子接口\n[Huawei-GigabitEthernet0/0/0.1")]),v._v(" "),t("p",[v._v("dot1q termination vid 2 //给子接口封装dot1q协议，允许vlan2通过\n[Huawei-GigabitEthernet0/0/0.1]")]),v._v(" "),t("p",[v._v("ip add 192.168.2.254 24 //给子接口配上IP地址\n[Huawei-GigabitEthernet0/0/0.1]")]),v._v(" "),t("p",[v._v("arp broadcast enable    //启动ARP的广播功能")])])],1)}),[],!1,null,null,null);t.default=r.exports}}]);